!function(e){"use strict";var t,s,r,n,a;t=function(e){var t,s;for(e=e||{},t=1;t<arguments.length;t+=1)if(arguments[t])for(s in arguments[t])arguments[t].hasOwnProperty(s)&&(e[s]=arguments[t][s]);return e},r=function(e,t,s){var r=document.createElement(e);return r.classList.add(t),r.innerHTML=s,r},n=function(e,t,s,n){var a,o,i=document.createElement("div"),l=document.createElement("p");return i.classList.add("mailchimp-it-response-box"),i.classList.add(t),l.classList.add("mailchimp-it-text"),l.textContent=e,i.appendChild(l),s&&(a=r("div","mailchimp-it-before-response",s),i.insertBefore(a,l)),n&&(o=r("div","mailchimp-it-after-response",n),i.appendChild(o)),i},s=function(){var e=document.createElement("div");return e.classList.add("mailchimpit-loader"),e.innerHTML='<svg class="mailchimp-it-spinner" width="65px" height="65px" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg"><circle class="mailchimp-it-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg>',e},a=function(e,r){var a,o=document.querySelectorAll(e),i=t({successMessage:"Thanks for subscribing !",successMessageBefore:"<p>Before !</p>",successMessageAfter:"<p>After !</p>",successMessageClassName:"mailchimp-it-success",errorMessageClassName:"mailchimp-it-error",errorMessageBefore:null,errorMessageAfter:null,errorMessageTimeout:5e3,mailInputName:"newsletter_mail",firstNameInputName:"newsletter_first_name",lastNameInputName:"newsletter_last_name",loaderElt:s()},r),l=n(i.successMessage,i.successMessageClassName,i.successMessageBefore,i.successMessageAfter);Array.prototype.forEach.call(o,function(e){if("FORM"!==e.nodeName)console.error("mailchimp-it only works with forms tags, you provide "+e.nodeName,e);else{var t=e.getAttribute("action");e.onsubmit=function(s){s.preventDefault();var r,o=new XMLHttpRequest,c="",m=[],u=e.querySelector("input[name="+i.mailInputName+"]"),p=e.querySelector("input[name="+i.firstNameInputName+"]"),d=e.querySelector("input[name="+i.lastNameInputName+"]"),f={};u&&(f[i.mailInputName]=u.value),p&&(f[i.firstNameInputName]=p.value),d&&(f[i.lastNameInputName]=d.value);for(r in f)f.hasOwnProperty(r)&&m.push(encodeURIComponent(r)+"="+encodeURIComponent(f[r]));c=m.join("&").replace(/%20/g,"+"),o.open("POST",t,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.parentNode.insertBefore(i.loaderElt,e.nextSibling),e.remove(),o.onload=function(){var t=JSON.parse(o.responseText);o.status>=200&&o.status<400&&"subscribed"===t.status?(console.log("success !"),console.log(o.status),console.log(t),i.loaderElt.parentNode.insertBefore(l,i.loaderElt.nextSibling),i.loaderElt.remove()):(a=n(t.detail,i.errorMessageClassName,i.errorMessageBefore,i.errorMessageAfter),console.error(t),console.error(t.detail),i.loaderElt.parentNode.insertBefore(a,i.loaderElt.nextSibling),i.loaderElt.remove(),window.setTimeout(function(){a.parentNode.insertBefore(e,a.nextSibling),a.remove()},i.errorMessageTimeout))},o.send(c),console.log(c)}}})},e.mailchimpIt=a}(window),window.jQuery&&!function(e,t){"use strict";function s(e,s){t(e,s)}e.fn.tweetParser=function(e){return s(this.selector,e)}}(jQuery,mailchimpIt);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haWxjaGltcC1pdC5qcyJdLCJuYW1lcyI6WyJleHBvcnRzIiwiZXh0ZW5kIiwibWFpbGNoaW1wSXRMb2FkZXIiLCJtYWtlRGl2IiwibWFrZUJveCIsIm1haWxjaGltcEl0Iiwib3V0IiwiaSIsImtleSIsImFyZ3VtZW50cyIsImxlbmd0aCIsImhhc093blByb3BlcnR5IiwiZWxUeXBlIiwiY2xhc3NOYW1lIiwiY29udGVudCIsImVsIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiaW5uZXJIVE1MIiwibWVzc2FnZSIsImJlZm9yZSIsImFmdGVyIiwiZGl2QmVmb3JlIiwiZGl2QWZ0ZXIiLCJkaXYiLCJwIiwidGV4dENvbnRlbnQiLCJhcHBlbmRDaGlsZCIsImluc2VydEJlZm9yZSIsImVsZW1lbnQiLCJhcmdzIiwiZXJyb3JCb3giLCJlbHQiLCJxdWVyeVNlbGVjdG9yQWxsIiwicGFyYW1ldGVycyIsInN1Y2Nlc3NNZXNzYWdlIiwic3VjY2Vzc01lc3NhZ2VCZWZvcmUiLCJzdWNjZXNzTWVzc2FnZUFmdGVyIiwic3VjY2Vzc01lc3NhZ2VDbGFzc05hbWUiLCJlcnJvck1lc3NhZ2VDbGFzc05hbWUiLCJlcnJvck1lc3NhZ2VCZWZvcmUiLCJlcnJvck1lc3NhZ2VBZnRlciIsImVycm9yTWVzc2FnZVRpbWVvdXQiLCJtYWlsSW5wdXROYW1lIiwiZmlyc3ROYW1lSW5wdXROYW1lIiwibGFzdE5hbWVJbnB1dE5hbWUiLCJsb2FkZXJFbHQiLCJzdWNjZXNzQm94IiwiQXJyYXkiLCJwcm90b3R5cGUiLCJmb3JFYWNoIiwiY2FsbCIsIm5vZGVOYW1lIiwiY29uc29sZSIsImVycm9yIiwiYWN0aW9uIiwiZ2V0QXR0cmlidXRlIiwib25zdWJtaXQiLCJlIiwicHJldmVudERlZmF1bHQiLCJuYW1lIiwicmVxdWVzdCIsIlhNTEh0dHBSZXF1ZXN0IiwidXJsRW5jb2RlZERhdGEiLCJ1cmxFbmNvZGVkRGF0YVBhaXJzIiwibWFpbElucHV0IiwicXVlcnlTZWxlY3RvciIsImZpcnN0TmFtZUlucHV0IiwibGFzdE5hbWVJbnB1dCIsImRhdGEiLCJ2YWx1ZSIsInB1c2giLCJlbmNvZGVVUklDb21wb25lbnQiLCJqb2luIiwicmVwbGFjZSIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwicGFyZW50Tm9kZSIsIm5leHRTaWJsaW5nIiwicmVtb3ZlIiwib25sb2FkIiwiZCIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsInN0YXR1cyIsImxvZyIsImRldGFpbCIsIndpbmRvdyIsInNldFRpbWVvdXQiLCJzZW5kIiwialF1ZXJ5IiwiJCIsIm1haWxjaGltcEl0aWZ5Iiwib3B0aW9ucyIsImZuIiwidHdlZXRQYXJzZXIiLCJ0aGlzIiwic2VsZWN0b3IiXSwibWFwcGluZ3MiOiJDQVFDLFNBQVVBLEdBQ1AsWUFFQSxJQUNJQyxHQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxDQUVKSixHQUFTLFNBQVVLLEdBQ2YsR0FBSUMsR0FDQUMsQ0FJSixLQUZBRixFQUFNQSxNQUVEQyxFQUFJLEVBQUdBLEVBQUlFLFVBQVVDLE9BQVFILEdBQUssRUFDbkMsR0FBSUUsVUFBVUYsR0FDVixJQUFLQyxJQUFPQyxXQUFVRixHQUNkRSxVQUFVRixHQUFHSSxlQUFlSCxLQUM1QkYsRUFBSUUsR0FBT0MsVUFBVUYsR0FBR0MsR0FLeEMsT0FBT0YsSUFHWEgsRUFBVSxTQUFVUyxFQUFRQyxFQUFXQyxHQUNuQyxHQUFJQyxHQUFLQyxTQUFTQyxjQUFjTCxFQUdoQyxPQUZBRyxHQUFHRyxVQUFVQyxJQUFJTixHQUNqQkUsRUFBR0ssVUFBWU4sRUFDUkMsR0FHWFgsRUFBVSxTQUFVaUIsRUFBU1IsRUFBV1MsRUFBUUMsR0FDNUMsR0FDSUMsR0FDQUMsRUFGQUMsRUFBTVYsU0FBU0MsY0FBYyxPQUc3QlUsRUFBSVgsU0FBU0MsY0FBYyxJQW1CL0IsT0FqQkFTLEdBQUlSLFVBQVVDLElBQUksNkJBQ2xCTyxFQUFJUixVQUFVQyxJQUFJTixHQUVsQmMsRUFBRVQsVUFB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QUVyQlMsT0FBT0MsV0FBVyxXQUNkMUQsRUFBUzhDLFdBQVdqRCxhQUFhZixFQUFJa0IsRUFBUytDLGFBQzlDL0MsRUFBU2dELFVBQ1Y3QyxFQUFXUSx1QkFHdEJtQixFQUFRNkIsS0FBSzNCLEdBQ2JWLFFBQVFpQyxJQUFJdkIsUUFNNUJqRSxFQUFRSyxZQUFjQSxHQUN4QnFGLFFBR0VBLE9BQU9HLFNBQ04sU0FBVUMsRUFBR3pGLEdBQ1YsWUFFQSxTQUFTMEYsR0FBZWhGLEVBQUlpRixHQUN4QjNGLEVBQVlVLEVBQUlpRixHQUdwQkYsRUFBRUcsR0FBR0MsWUFBYyxTQUFVRixHQUN6QixNQUFPRCxHQUFlSSxLQUFLQyxTQUFVSixLQUUzQ0gsT0FBUXhGIiwiZmlsZSI6Im1haWxjaGltcC1pdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFByb2plY3QgOiBtYWlsY2hpbXAtaXRcbiAqIGRlc2NyaXB0aW9uIDogU21hbGwgQUpBWCBNYWlsY2hpbXAgV3JhcHBlciAtIFR1cm4gYSBzaW1wbGUgZm9ybSBpbnRvIGEgTWFpbGNoaW1wIHJlYWR5IGZvcm1cbiAqIEF1dGhvciA6IFZpbmNlbnQgTG95IDx2aW5jZW50LmxveTFAZ21haWwuY29tPlxuICovXG5cbi8qZ2xvYmFsIHdpbmRvdywgZG9jdW1lbnQsIFhNTEh0dHBSZXF1ZXN0LCBjb25zb2xlKi9cblxuKGZ1bmN0aW9uIChleHBvcnRzKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgdmFyIC8vIGZ1bmN0aW9uc1xuICAgICAgICBleHRlbmQsXG4gICAgICAgIG1haWxjaGltcEl0TG9hZGVyLFxuICAgICAgICBtYWtlRGl2LFxuICAgICAgICBtYWtlQm94LFxuICAgICAgICBtYWlsY2hpbXBJdDtcblxuICAgIGV4dGVuZCA9IGZ1bmN0aW9uIChvdXQpIHtcbiAgICAgICAgdmFyIGksXG4gICAgICAgICAgICBrZXk7XG5cbiAgICAgICAgb3V0ID0gb3V0IHx8IHt9O1xuXG4gICAgICAgIGZvciAoaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGlmIChhcmd1bWVudHNbaV0pIHtcbiAgICAgICAgICAgICAgICBmb3IgKGtleSBpbiBhcmd1bWVudHNbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZ3VtZW50c1tpXS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRba2V5XSA9IGFyZ3VtZW50c1tpXVtrZXldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcblxuICAgIG1ha2VEaXYgPSBmdW5jdGlvbiAoZWxUeXBlLCBjbGFzc05hbWUsIGNvbnRlbnQpIHtcbiAgICAgICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlbFR5cGUpO1xuICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG4gICAgICAgIGVsLmlubmVySFRNTCA9IGNvbnRlbnQ7XG4gICAgICAgIHJldHVybiBlbDtcbiAgICB9O1xuXG4gICAgbWFrZUJveCA9IGZ1bmN0aW9uIChtZXNzYWdlLCBjbGFzc05hbWUsIGJlZm9yZSwgYWZ0ZXIpIHtcbiAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxuICAgICAgICAgICAgZGl2QmVmb3JlLFxuICAgICAgICAgICAgZGl2QWZ0ZXIsXG4gICAgICAgICAgICBwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuXG4gICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKCdtYWlsY2hpbXAtaXQtcmVzcG9uc2UtYm94Jyk7XG4gICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG5cbiAgICAgICAgcC5jbGFzc0xpc3QuYWRkKCdtYWlsY2hpbXAtaXQtdGV4dCcpO1xuICAgICAgICBwLnRleHRDb250ZW50ID0gbWVzc2FnZTtcbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKHApO1xuXG4gICAgICAgIGlmIChiZWZvcmUpIHtcbiAgICAgICAgICAgIGRpdkJlZm9yZSA9IG1ha2VEaXYoJ2RpdicsICdtYWlsY2hpbXAtaXQtYmVmb3JlLXJlc3BvbnNlJywgYmVmb3JlKTtcbiAgICAgICAgICAgIGRpdi5pbnNlcnRCZWZvcmUoZGl2QmVmb3JlLCBwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChhZnRlcikge1xuICAgICAgICAgICAgZGl2QWZ0ZXIgPSBtYWtlRGl2KCdkaXYnLCAnbWFpbGNoaW1wLWl0LWFmdGVyLXJlc3BvbnNlJywgYWZ0ZXIpO1xuICAgICAgICAgICAgZGl2LmFwcGVuZENoaWxkKGRpdkFmdGVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBkaXY7XG4gICAgfTtcblxuICAgIG1haWxjaGltcEl0TG9hZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnbWFpbGNoaW1waXQtbG9hZGVyJyk7XG4gICAgICAgIGVsLmlubmVySFRNTCA9XG4gICAgICAgICAgICAnPHN2ZyBjbGFzcz1cIm1haWxjaGltcC1pdC1zcGlubmVyXCIgd2lkdGg9XCI2NXB4XCIgaGVpZ2h0PVwiNjVweFwiIHZpZXdCb3g9XCIwIDAgNjYgNjZcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+JyArXG4gICAgICAgICAgICAnPGNpcmNsZSBjbGFzcz1cIm1haWxjaGltcC1pdC1wYXRoXCIgZmlsbD1cIm5vbmVcIiBzdHJva2Utd2lkdGg9XCI2XCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIGN4PVwiMzNcIiBjeT1cIjMzXCIgcj1cIjMwXCI+PC9jaXJjbGU+JyArXG4gICAgICAgICAgICAnPC9zdmc+JztcblxuICAgICAgICByZXR1cm4gZWw7XG4gICAgfTtcblxuICAgIG1haWxjaGltcEl0ID0gZnVuY3Rpb24gKGVsZW1lbnQsIGFyZ3MpIHtcblxuICAgICAgICB2YXIgZWx0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChlbGVtZW50KSxcbiAgICAgICAgICAgIHBhcmFtZXRlcnMgPSBleHRlbmQoe1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3NNZXNzYWdlOiAnVGhhbmtzIGZvciBzdWJzY3JpYmluZyAhJyxcbiAgICAgICAgICAgICAgICBzdWNjZXNzTWVzc2FnZUJlZm9yZTogJzxwPkJlZm9yZSAhPC9wPicsXG4gICAgICAgICAgICAgICAgc3VjY2Vzc01lc3NhZ2VBZnRlcjogICc8cD5BZnRlciAhPC9wPicsXG4gICAgICAgICAgICAgICAgc3VjY2Vzc01lc3NhZ2VDbGFzc05hbWU6ICdtYWlsY2hpbXAtaXQtc3VjY2VzcycsXG4gICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlQ2xhc3NOYW1lOiAnbWFpbGNoaW1wLWl0LWVycm9yJyxcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2VCZWZvcmU6IG51bGwsXG4gICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlQWZ0ZXI6IG51bGwsXG4gICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlVGltZW91dDogNTAwMCxcbiAgICAgICAgICAgICAgICBtYWlsSW5wdXROYW1lOiAnbmV3c2xldHRlcl9tYWlsJyxcbiAgICAgICAgICAgICAgICBmaXJzdE5hbWVJbnB1dE5hbWU6ICduZXdzbGV0dGVyX2ZpcnN0X25hbWUnLFxuICAgICAgICAgICAgICAgIGxhc3ROYW1lSW5wdXROYW1lOiAnbmV3c2xldHRlcl9sYXN0X25hbWUnLFxuICAgICAgICAgICAgICAgIGxvYWRlckVsdDogbWFpbGNoaW1wSXRMb2FkZXIoKVxuICAgICAgICAgICAgfSwgYXJncyksXG4gICAgICAgICAgICBzdWNjZXNzQm94ID0gbWFrZUJveChcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLnN1Y2Nlc3NNZXNzYWdlLFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMuc3VjY2Vzc01lc3NhZ2VDbGFzc05hbWUsXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycy5zdWNjZXNzTWVzc2FnZUJlZm9yZSxcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLnN1Y2Nlc3NNZXNzYWdlQWZ0ZXJcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICBlcnJvckJveDtcblxuICAgICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGVsdCwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICBpZiAoZWwubm9kZU5hbWUgIT09IFwiRk9STVwiKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignbWFpbGNoaW1wLWl0IG9ubHkgd29ya3Mgd2l0aCBmb3JtcyB0YWdzLCB5b3UgcHJvdmlkZSAnICsgZWwubm9kZU5hbWUsIGVsKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gb2tcbiAgICAgICAgICAgICAgICB2YXIgYWN0aW9uID0gZWwuZ2V0QXR0cmlidXRlKCdhY3Rpb24nKTtcblxuICAgICAgICAgICAgICAgIGVsLm9uc3VibWl0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsRW5jb2RlZERhdGEgPSAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybEVuY29kZWREYXRhUGFpcnMgPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWlsSW5wdXQgPSBlbC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPScgKyBwYXJhbWV0ZXJzLm1haWxJbnB1dE5hbWUgKyAnXScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3ROYW1lSW5wdXQgPSBlbC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPScgKyBwYXJhbWV0ZXJzLmZpcnN0TmFtZUlucHV0TmFtZSArICddJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0TmFtZUlucHV0ID0gZWwucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT0nICsgcGFyYW1ldGVycy5sYXN0TmFtZUlucHV0TmFtZSArICddJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0ge307XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG1haWxJbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtwYXJhbWV0ZXJzLm1haWxJbnB1dE5hbWVdID0gbWFpbElucHV0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpcnN0TmFtZUlucHV0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhW3BhcmFtZXRlcnMuZmlyc3ROYW1lSW5wdXROYW1lXSA9IGZpcnN0TmFtZUlucHV0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3ROYW1lSW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbcGFyYW1ldGVycy5sYXN0TmFtZUlucHV0TmFtZV0gPSBsYXN0TmFtZUlucHV0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yIChuYW1lIGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsRW5jb2RlZERhdGFQYWlycy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChuYW1lKSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChkYXRhW25hbWVdKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB1cmxFbmNvZGVkRGF0YSA9IHVybEVuY29kZWREYXRhUGFpcnMuam9pbignJicpLnJlcGxhY2UoLyUyMC9nLCAnKycpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3Qub3BlbignUE9TVCcsIGFjdGlvbiwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcpO1xuICAgICAgICAgICAgICAgICAgICAvL3JlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1MZW5ndGgnLCB1cmxFbmNvZGVkRGF0YS5sZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICBlbC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShwYXJhbWV0ZXJzLmxvYWRlckVsdCwgZWwubmV4dFNpYmxpbmcpO1xuICAgICAgICAgICAgICAgICAgICBlbC5yZW1vdmUoKTtcblxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gSlNPTi5wYXJzZShyZXF1ZXN0LnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTdWNjZXNzIVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID49IDIwMCAmJiByZXF1ZXN0LnN0YXR1cyA8IDQwMCAmJiBkLnN0YXR1cyA9PT0gJ3N1YnNjcmliZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3N1Y2Nlc3MgIScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcXVlc3Quc3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMubG9hZGVyRWx0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHN1Y2Nlc3NCb3gsIHBhcmFtZXRlcnMubG9hZGVyRWx0Lm5leHRTaWJsaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLmxvYWRlckVsdC5yZW1vdmUoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSByZWFjaGVkIG91ciB0YXJnZXQgc2VydmVyLCBidXQgaXQgcmV0dXJuZWQgYW4gZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvckJveCA9IG1ha2VCb3goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQuZGV0YWlsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLmVycm9yTWVzc2FnZUNsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycy5lcnJvck1lc3NhZ2VCZWZvcmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMuZXJyb3JNZXNzYWdlQWZ0ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihkLmRldGFpbCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLmxvYWRlckVsdC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlcnJvckJveCwgcGFyYW1ldGVycy5sb2FkZXJFbHQubmV4dFNpYmxpbmcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMubG9hZGVyRWx0LnJlbW92ZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvckJveC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlbCwgZXJyb3JCb3gubmV4dFNpYmxpbmcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvckJveC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBwYXJhbWV0ZXJzLmVycm9yTWVzc2FnZVRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LnNlbmQodXJsRW5jb2RlZERhdGEpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh1cmxFbmNvZGVkRGF0YSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGV4cG9ydHMubWFpbGNoaW1wSXQgPSBtYWlsY2hpbXBJdDtcbn0od2luZG93KSk7XG5cbi8qZ2xvYmFsICQsIGpRdWVyeSwgbWFpbGNoaW1wSXQqL1xuaWYgKHdpbmRvdy5qUXVlcnkpIHtcbiAgICAoZnVuY3Rpb24gKCQsIG1haWxjaGltcEl0KSB7XG4gICAgICAgICd1c2Ugc3RyaWN0JztcblxuICAgICAgICBmdW5jdGlvbiBtYWlsY2hpbXBJdGlmeShlbCwgb3B0aW9ucykge1xuICAgICAgICAgICAgbWFpbGNoaW1wSXQoZWwsIG9wdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgJC5mbi50d2VldFBhcnNlciA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFpbGNoaW1wSXRpZnkodGhpcy5zZWxlY3Rvciwgb3B0aW9ucyk7XG4gICAgICAgIH07XG4gICAgfShqUXVlcnksIG1haWxjaGltcEl0KSk7XG59Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
