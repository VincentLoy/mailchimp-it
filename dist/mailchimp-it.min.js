!function(e){"use strict";var t,s,r,n,a;t=function(e){var t,s;for(e=e||{},t=1;t<arguments.length;t+=1)if(arguments[t])for(s in arguments[t])arguments[t].hasOwnProperty(s)&&(e[s]=arguments[t][s]);return e},r=function(e,t,s){var r=document.createElement(e);return r.classList.add(t),r.innerHTML=s,r},n=function(e,t,s,n){var a,o,i=document.createElement("div"),l=document.createElement("p");return i.classList.add("mailchimp-it-response-box"),i.classList.add(t),l.classList.add("mailchimp-it-text"),l.textContent=e,i.appendChild(l),s&&(a=r("div","mailchimp-it-before-response",s),i.insertBefore(a,l)),n&&(o=r("div","mailchimp-it-after-response",n),i.appendChild(o)),i},s=function(){var e=document.createElement("div");return e.classList.add("mailchimpit-loader"),e.innerHTML='<svg class="mailchimp-it-spinner" width="65px" height="65px" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg"><circle class="mailchimp-it-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg>',e},a=function(e,r){var a,o=document.querySelectorAll(e),i=t({successMessage:"Thanks for subscribing !",successMessageBefore:null,successMessageAfter:null,successMessageClassName:"mailchimp-it-success",errorMessageClassName:"mailchimp-it-error",errorMessageBefore:null,errorMessageAfter:null,errorMessageTimeout:5e3,mailInputName:"newsletter_mail",firstNameInputName:"newsletter_first_name",lastNameInputName:"newsletter_last_name",loaderElt:s()},r),l=n(i.successMessage,i.successMessageClassName,i.successMessageBefore,i.successMessageAfter);Array.prototype.forEach.call(o,function(e){if("FORM"!==e.nodeName)console.error("mailchimp-it only works with forms tags, you provide "+e.nodeName,e);else{var t=e.getAttribute("action");e.onsubmit=function(s){s.preventDefault();var r,o,c=new XMLHttpRequest,m=[],u=e.querySelector("input[name="+i.mailInputName+"]"),p=e.querySelector("input[name="+i.firstNameInputName+"]"),d=e.querySelector("input[name="+i.lastNameInputName+"]"),f={};u&&(f[i.mailInputName]=u.value),p&&(f[i.firstNameInputName]=p.value),d&&(f[i.lastNameInputName]=d.value);for(o in f)f.hasOwnProperty(o)&&m.push(encodeURIComponent(o)+"="+encodeURIComponent(f[o]));r=m.join("&").replace(/%20/g,"+"),c.open("POST",t,!0),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.parentNode.insertBefore(i.loaderElt,e.nextSibling),e.remove(),c.onload=function(){var t=JSON.parse(c.responseText);c.status>=200&&c.status<400&&"subscribed"===t.status?(console.log("success !"),console.log(c.status),console.log(t),i.loaderElt.parentNode.insertBefore(l,i.loaderElt.nextSibling),i.loaderElt.remove()):(a=n(t.detail,i.errorMessageClassName,i.errorMessageBefore,i.errorMessageAfter),console.error(t),console.error(t.detail),i.loaderElt.parentNode.insertBefore(a,i.loaderElt.nextSibling),i.loaderElt.remove(),window.setTimeout(function(){a.parentNode.insertBefore(e,a.nextSibling),a.remove()},i.errorMessageTimeout))},c.send(r),console.log(r)}}})},e.mailchimpIt=a}(window),window.jQuery&&!function(e,t){"use strict";function s(e,s){t(e,s)}e.fn.mailchimpIt=function(e){return s(this.selector,e)}}(jQuery,mailchimpIt);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haWxjaGltcC1pdC5qcyJdLCJuYW1lcyI6WyJleHBvcnRzIiwiZXh0ZW5kIiwibWFpbGNoaW1wSXRMb2FkZXIiLCJtYWtlRGl2IiwibWFrZUJveCIsIm1haWxjaGltcEl0Iiwib3V0IiwiaSIsImtleSIsImFyZ3VtZW50cyIsImxlbmd0aCIsImhhc093blByb3BlcnR5IiwiZWxUeXBlIiwiY2xhc3NOYW1lIiwiY29udGVudCIsImVsIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiaW5uZXJIVE1MIiwibWVzc2FnZSIsImJlZm9yZSIsImFmdGVyIiwiZGl2QmVmb3JlIiwiZGl2QWZ0ZXIiLCJkaXYiLCJwIiwidGV4dENvbnRlbnQiLCJhcHBlbmRDaGlsZCIsImluc2VydEJlZm9yZSIsImVsZW1lbnQiLCJhcmdzIiwiZXJyb3JCb3giLCJlbHQiLCJxdWVyeVNlbGVjdG9yQWxsIiwicGFyYW1ldGVycyIsInN1Y2Nlc3NNZXNzYWdlIiwic3VjY2Vzc01lc3NhZ2VCZWZvcmUiLCJzdWNjZXNzTWVzc2FnZUFmdGVyIiwic3VjY2Vzc01lc3NhZ2VDbGFzc05hbWUiLCJlcnJvck1lc3NhZ2VDbGFzc05hbWUiLCJlcnJvck1lc3NhZ2VCZWZvcmUiLCJlcnJvck1lc3NhZ2VBZnRlciIsImVycm9yTWVzc2FnZVRpbWVvdXQiLCJtYWlsSW5wdXROYW1lIiwiZmlyc3ROYW1lSW5wdXROYW1lIiwibGFzdE5hbWVJbnB1dE5hbWUiLCJsb2FkZXJFbHQiLCJzdWNjZXNzQm94IiwiQXJyYXkiLCJwcm90b3R5cGUiLCJmb3JFYWNoIiwiY2FsbCIsIm5vZGVOYW1lIiwiY29uc29sZSIsImVycm9yIiwiYWN0aW9uIiwiZ2V0QXR0cmlidXRlIiwib25zdWJtaXQiLCJlIiwicHJldmVudERlZmF1bHQiLCJ1cmxFbmNvZGVkRGF0YSIsIm5hbWUiLCJyZXF1ZXN0IiwiWE1MSHR0cFJlcXVlc3QiLCJ1cmxFbmNvZGVkRGF0YVBhaXJzIiwibWFpbElucHV0IiwicXVlcnlTZWxlY3RvciIsImZpcnN0TmFtZUlucHV0IiwibGFzdE5hbWVJbnB1dCIsImRhdGEiLCJ2YWx1ZSIsInB1c2giLCJlbmNvZGVVUklDb21wb25lbnQiLCJqb2luIiwicmVwbGFjZSIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwicGFyZW50Tm9kZSIsIm5leHRTaWJsaW5nIiwicmVtb3ZlIiwib25sb2FkIiwiZCIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsInN0YXR1cyIsImxvZyIsImRldGFpbCIsIndpbmRvdyIsInNldFRpbWVvdXQiLCJzZW5kIiwialF1ZXJ5IiwiJCIsIm1haWxjaGltcEl0aWZ5Iiwib3B0aW9ucyIsImZuIiwidGhpcyIsInNlbGVjdG9yIl0sIm1hcHBpbmdzIjoiQ0FTQyxTQUFVQSxHQUNQLFlBRUEsSUFDSUMsR0FDQUMsRUFDQUMsRUFDQUMsRUFDQUMsQ0FFSkosR0FBUyxTQUFVSyxHQUNmLEdBQUlDLEdBQ0FDLENBSUosS0FGQUYsRUFBTUEsTUFFREMsRUFBSSxFQUFHQSxFQUFJRSxVQUFVQyxPQUFRSCxHQUFLLEVBQ25DLEdBQUlFLFVBQVVGLEdBQ1YsSUFBS0MsSUFBT0MsV0FBVUYsR0FDZEUsVUFBVUYsR0FBR0ksZUFBZUgsS0FDNUJGLEVBQUlFLEdBQU9DLFVBQVVGLEdBQUdDLEdBS3hDLE9BQU9GLElBR1hILEVBQVUsU0FBVVMsRUFBUUMsRUFBV0MsR0FDbkMsR0FBSUMsR0FBS0MsU0FBU0MsY0FBY0wsRUFHaEMsT0FGQUcsR0FBR0csVUFBVUMsSUFBSU4sR0FDakJFLEVBQUdLLFVBQVlOLEVBQ1JDLEdBR1hYLEVBQVUsU0FBVWlCLEVBQVNSLEVBQVdTLEVBQVFDLEdBQzVDLEdBQ0lDLEdBQ0FDLEVBRkFDLEVBQU1WLFNBQVNDLGNBQWMsT0FHN0JVLEVBQUlYLFNBQVNDLGNBQWMsSUFtQi9CLE9BakJBUyxHQUFJUixVQUFVQyxJQUFJLDZCQUNsQk8sRUFBSVIsVUFBVUMsSUFBSU4sR0FFbEJjLEVBQUVULFVBQVVDLElBQUkscUJBQ2hC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LEVBQVM4QyxXQUFXakQsYUFBYWYsRUFBSWtCLEVBQVMrQyxhQUM5Qy9DLEVBQVNnRCxVQUNWN0MsRUFBV1EsdUJBR3RCb0IsRUFBUTRCLEtBQUs5QixHQUNiUCxRQUFRaUMsSUFBSTFCLFFBTTVCOUQsRUFBUUssWUFBY0EsR0FDeEJxRixRQUdFQSxPQUFPRyxTQUNOLFNBQVVDLEVBQUd6RixHQUNWLFlBRUEsU0FBUzBGLEdBQWVoRixFQUFJaUYsR0FDeEIzRixFQUFZVSxFQUFJaUYsR0FHcEJGLEVBQUVHLEdBQUc1RixZQUFjLFNBQVUyRixHQUN6QixNQUFPRCxHQUFlRyxLQUFLQyxTQUFVSCxLQUUzQ0gsT0FBUXhGIiwiZmlsZSI6Im1haWxjaGltcC1pdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFByb2plY3QgOiBtYWlsY2hpbXAtaXRcbiAqIHZlcnNpb24gOiAxLjAuMFxuICogZGVzY3JpcHRpb24gOiBTbWFsbCBBSkFYIE1haWxjaGltcCBQbHVnaW4gLSBUdXJuIGEgc2ltcGxlIGZvcm0gaW50byBhIE1haWxjaGltcC1yZWFkeSBmb3JtXG4gKiBBdXRob3IgOiBWaW5jZW50IExveSA8dmluY2VudC5sb3kxQGdtYWlsLmNvbT5cbiAqL1xuXG4vKmdsb2JhbCB3aW5kb3csIGRvY3VtZW50LCBYTUxIdHRwUmVxdWVzdCwgY29uc29sZSovXG5cbihmdW5jdGlvbiAoZXhwb3J0cykge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciAvLyBmdW5jdGlvbnNcbiAgICAgICAgZXh0ZW5kLFxuICAgICAgICBtYWlsY2hpbXBJdExvYWRlcixcbiAgICAgICAgbWFrZURpdixcbiAgICAgICAgbWFrZUJveCxcbiAgICAgICAgbWFpbGNoaW1wSXQ7XG5cbiAgICBleHRlbmQgPSBmdW5jdGlvbiAob3V0KSB7XG4gICAgICAgIHZhciBpLFxuICAgICAgICAgICAga2V5O1xuXG4gICAgICAgIG91dCA9IG91dCB8fCB7fTtcblxuICAgICAgICBmb3IgKGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBpZiAoYXJndW1lbnRzW2ldKSB7XG4gICAgICAgICAgICAgICAgZm9yIChrZXkgaW4gYXJndW1lbnRzW2ldKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmd1bWVudHNbaV0uaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0W2tleV0gPSBhcmd1bWVudHNbaV1ba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG5cbiAgICBtYWtlRGl2ID0gZnVuY3Rpb24gKGVsVHlwZSwgY2xhc3NOYW1lLCBjb250ZW50KSB7XG4gICAgICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZWxUeXBlKTtcbiAgICAgICAgZWwuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICAgICAgICBlbC5pbm5lckhUTUwgPSBjb250ZW50O1xuICAgICAgICByZXR1cm4gZWw7XG4gICAgfTtcblxuICAgIG1ha2VCb3ggPSBmdW5jdGlvbiAobWVzc2FnZSwgY2xhc3NOYW1lLCBiZWZvcmUsIGFmdGVyKSB7XG4gICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcbiAgICAgICAgICAgIGRpdkJlZm9yZSxcbiAgICAgICAgICAgIGRpdkFmdGVyLFxuICAgICAgICAgICAgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcblxuICAgICAgICBkaXYuY2xhc3NMaXN0LmFkZCgnbWFpbGNoaW1wLWl0LXJlc3BvbnNlLWJveCcpO1xuICAgICAgICBkaXYuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuXG4gICAgICAgIHAuY2xhc3NMaXN0LmFkZCgnbWFpbGNoaW1wLWl0LXRleHQnKTtcbiAgICAgICAgcC50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZChwKTtcblxuICAgICAgICBpZiAoYmVmb3JlKSB7XG4gICAgICAgICAgICBkaXZCZWZvcmUgPSBtYWtlRGl2KCdkaXYnLCAnbWFpbGNoaW1wLWl0LWJlZm9yZS1yZXNwb25zZScsIGJlZm9yZSk7XG4gICAgICAgICAgICBkaXYuaW5zZXJ0QmVmb3JlKGRpdkJlZm9yZSwgcCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYWZ0ZXIpIHtcbiAgICAgICAgICAgIGRpdkFmdGVyID0gbWFrZURpdignZGl2JywgJ21haWxjaGltcC1pdC1hZnRlci1yZXNwb25zZScsIGFmdGVyKTtcbiAgICAgICAgICAgIGRpdi5hcHBlbmRDaGlsZChkaXZBZnRlcik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZGl2O1xuICAgIH07XG5cbiAgICBtYWlsY2hpbXBJdExvYWRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ21haWxjaGltcGl0LWxvYWRlcicpO1xuICAgICAgICBlbC5pbm5lckhUTUwgPVxuICAgICAgICAgICAgJzxzdmcgY2xhc3M9XCJtYWlsY2hpbXAtaXQtc3Bpbm5lclwiIHdpZHRoPVwiNjVweFwiIGhlaWdodD1cIjY1cHhcIiB2aWV3Qm94PVwiMCAwIDY2IDY2XCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPicgK1xuICAgICAgICAgICAgJzxjaXJjbGUgY2xhc3M9XCJtYWlsY2hpbXAtaXQtcGF0aFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlLXdpZHRoPVwiNlwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBjeD1cIjMzXCIgY3k9XCIzM1wiIHI9XCIzMFwiPjwvY2lyY2xlPicgK1xuICAgICAgICAgICAgJzwvc3ZnPic7XG5cbiAgICAgICAgcmV0dXJuIGVsO1xuICAgIH07XG5cbiAgICBtYWlsY2hpbXBJdCA9IGZ1bmN0aW9uIChlbGVtZW50LCBhcmdzKSB7XG5cbiAgICAgICAgdmFyIGVsdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZWxlbWVudCksXG4gICAgICAgICAgICBwYXJhbWV0ZXJzID0gZXh0ZW5kKHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzTWVzc2FnZTogJ1RoYW5rcyBmb3Igc3Vic2NyaWJpbmcgIScsXG4gICAgICAgICAgICAgICAgc3VjY2Vzc01lc3NhZ2VCZWZvcmU6IG51bGwsXG4gICAgICAgICAgICAgICAgc3VjY2Vzc01lc3NhZ2VBZnRlcjogbnVsbCxcbiAgICAgICAgICAgICAgICBzdWNjZXNzTWVzc2FnZUNsYXNzTmFtZTogJ21haWxjaGltcC1pdC1zdWNjZXNzJyxcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2VDbGFzc05hbWU6ICdtYWlsY2hpbXAtaXQtZXJyb3InLFxuICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZUJlZm9yZTogbnVsbCxcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2VBZnRlcjogbnVsbCxcbiAgICAgICAgICAgICAgICBlcnJvck1lc3NhZ2VUaW1lb3V0OiA1MDAwLFxuICAgICAgICAgICAgICAgIG1haWxJbnB1dE5hbWU6ICduZXdzbGV0dGVyX21haWwnLFxuICAgICAgICAgICAgICAgIGZpcnN0TmFtZUlucHV0TmFtZTogJ25ld3NsZXR0ZXJfZmlyc3RfbmFtZScsXG4gICAgICAgICAgICAgICAgbGFzdE5hbWVJbnB1dE5hbWU6ICduZXdzbGV0dGVyX2xhc3RfbmFtZScsXG4gICAgICAgICAgICAgICAgbG9hZGVyRWx0OiBtYWlsY2hpbXBJdExvYWRlcigpXG4gICAgICAgICAgICB9LCBhcmdzKSxcbiAgICAgICAgICAgIHN1Y2Nlc3NCb3ggPSBtYWtlQm94KFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMuc3VjY2Vzc01lc3NhZ2UsXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVycy5zdWNjZXNzTWVzc2FnZUNsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLnN1Y2Nlc3NNZXNzYWdlQmVmb3JlLFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMuc3VjY2Vzc01lc3NhZ2VBZnRlclxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIGVycm9yQm94O1xuXG4gICAgICAgIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoZWx0LCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgIGlmIChlbC5ub2RlTmFtZSAhPT0gXCJGT1JNXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdtYWlsY2hpbXAtaXQgb25seSB3b3JrcyB3aXRoIGZvcm1zIHRhZ3MsIHlvdSBwcm92aWRlICcgKyBlbC5ub2RlTmFtZSwgZWwpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBva1xuICAgICAgICAgICAgICAgIHZhciBhY3Rpb24gPSBlbC5nZXRBdHRyaWJ1dGUoJ2FjdGlvbicpO1xuXG4gICAgICAgICAgICAgICAgZWwub25zdWJtaXQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCksXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmxFbmNvZGVkRGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybEVuY29kZWREYXRhUGFpcnMgPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWlsSW5wdXQgPSBlbC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPScgKyBwYXJhbWV0ZXJzLm1haWxJbnB1dE5hbWUgKyAnXScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3ROYW1lSW5wdXQgPSBlbC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPScgKyBwYXJhbWV0ZXJzLmZpcnN0TmFtZUlucHV0TmFtZSArICddJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0TmFtZUlucHV0ID0gZWwucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT0nICsgcGFyYW1ldGVycy5sYXN0TmFtZUlucHV0TmFtZSArICddJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0ge307XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG1haWxJbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtwYXJhbWV0ZXJzLm1haWxJbnB1dE5hbWVdID0gbWFpbElucHV0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpcnN0TmFtZUlucHV0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhW3BhcmFtZXRlcnMuZmlyc3ROYW1lSW5wdXROYW1lXSA9IGZpcnN0TmFtZUlucHV0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3ROYW1lSW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbcGFyYW1ldGVycy5sYXN0TmFtZUlucHV0TmFtZV0gPSBsYXN0TmFtZUlucHV0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yIChuYW1lIGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsRW5jb2RlZERhdGFQYWlycy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChuYW1lKSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChkYXRhW25hbWVdKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB1cmxFbmNvZGVkRGF0YSA9IHVybEVuY29kZWREYXRhUGFpcnMuam9pbignJicpLnJlcGxhY2UoLyUyMC9nLCAnKycpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3Qub3BlbignUE9TVCcsIGFjdGlvbiwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3Quc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcpO1xuICAgICAgICAgICAgICAgICAgICAvL1RPRE8gOiBDaGVjayBpZiBsb2FkZXJFbHQgaXMgc3RyaW5nLCB0aGVuIHB1dCBpdCBpbiBhIE5vZGUgZWx0XG4gICAgICAgICAgICAgICAgICAgIGVsLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHBhcmFtZXRlcnMubG9hZGVyRWx0LCBlbC5uZXh0U2libGluZyk7XG4gICAgICAgICAgICAgICAgICAgIGVsLnJlbW92ZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3Qub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBKU09OLnBhcnNlKHJlcXVlc3QucmVzcG9uc2VUZXh0KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcXVlc3Quc3RhdHVzID49IDIwMCAmJiByZXF1ZXN0LnN0YXR1cyA8IDQwMCAmJiBkLnN0YXR1cyA9PT0gJ3N1YnNjcmliZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3N1Y2Nlc3MgIScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcXVlc3Quc3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMubG9hZGVyRWx0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHN1Y2Nlc3NCb3gsIHBhcmFtZXRlcnMubG9hZGVyRWx0Lm5leHRTaWJsaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLmxvYWRlckVsdC5yZW1vdmUoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvckJveCA9IG1ha2VCb3goXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQuZGV0YWlsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLmVycm9yTWVzc2FnZUNsYXNzTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycy5lcnJvck1lc3NhZ2VCZWZvcmUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMuZXJyb3JNZXNzYWdlQWZ0ZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihkLmRldGFpbCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLmxvYWRlckVsdC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlcnJvckJveCwgcGFyYW1ldGVycy5sb2FkZXJFbHQubmV4dFNpYmxpbmcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMubG9hZGVyRWx0LnJlbW92ZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvckJveC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlbCwgZXJyb3JCb3gubmV4dFNpYmxpbmcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvckJveC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBwYXJhbWV0ZXJzLmVycm9yTWVzc2FnZVRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LnNlbmQodXJsRW5jb2RlZERhdGEpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh1cmxFbmNvZGVkRGF0YSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGV4cG9ydHMubWFpbGNoaW1wSXQgPSBtYWlsY2hpbXBJdDtcbn0od2luZG93KSk7XG5cbi8qZ2xvYmFsICQsIGpRdWVyeSwgbWFpbGNoaW1wSXQqL1xuaWYgKHdpbmRvdy5qUXVlcnkpIHtcbiAgICAoZnVuY3Rpb24gKCQsIG1haWxjaGltcEl0KSB7XG4gICAgICAgICd1c2Ugc3RyaWN0JztcblxuICAgICAgICBmdW5jdGlvbiBtYWlsY2hpbXBJdGlmeShlbCwgb3B0aW9ucykge1xuICAgICAgICAgICAgbWFpbGNoaW1wSXQoZWwsIG9wdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgJC5mbi5tYWlsY2hpbXBJdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFpbGNoaW1wSXRpZnkodGhpcy5zZWxlY3Rvciwgb3B0aW9ucyk7XG4gICAgICAgIH07XG4gICAgfShqUXVlcnksIG1haWxjaGltcEl0KSk7XG59Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
