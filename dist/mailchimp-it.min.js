!function(e){"use strict";var t,r,n,a;t=function(e){var t,r;for(e=e||{},t=1;t<arguments.length;t+=1)if(arguments[t])for(r in arguments[t])arguments[t].hasOwnProperty(r)&&(e[r]=arguments[t][r]);return e},n=function(e,t){var r=document.createElement("div");return r.classList.add("mailchimp-it-response-box"),r.classList.add(t),r.textContent=e,r},r=function(){var e=document.createElement("div");return e.classList.add("mailchimpit-loader"),e.textContent="Please wait...",e},a=function(e,a){var s,o=document.querySelectorAll(e),l=t({successMessage:"Thanks for subscribing !",successMessageClassName:"mailchimp-it-success",errorMessageClassName:"mailchimp-it-error",mailInputName:"newsletter_mail",firstNameInputName:"newsletter_first_name",lastNameInputName:"newsletter_last_name",loaderElt:r()},a),i=n(l.successMessage,l.successMessageClassName);Array.prototype.forEach.call(o,function(e){if("FORM"!==e.nodeName)console.error("mailchimp-it only works with forms tags, you provide "+e.nodeName,e);else{var t=e.getAttribute("action");e.onsubmit=function(r){r.preventDefault();var a,o=new XMLHttpRequest,u="",m=[],c=e.querySelector("input[name="+l.mailInputName+"]"),p=e.querySelector("input[name="+l.firstNameInputName+"]"),d=e.querySelector("input[name="+l.lastNameInputName+"]"),f={};c&&(f[l.mailInputName]=c.value),p&&(f[l.firstNameInputName]=p.value),d&&(f[l.lastNameInputName]=d.value);for(a in f)m.push(encodeURIComponent(a)+"="+encodeURIComponent(f[a]));u=m.join("&").replace(/%20/g,"+"),o.open("POST",t,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.parentNode.insertBefore(l.loaderElt,e.nextSibling),e.remove(),o.onload=function(){var e=JSON.parse(o.responseText);o.status>=200&&o.status<400&&!e.error?(console.log("success !"),console.log(o.status),console.log(e),l.loaderElt.parentNode.insertBefore(i,l.loaderElt.nextSibling),l.loaderElt.remove()):(s=n(e.error,l.errorMessageClassName),console.error(e),console.error(e.error),l.loaderElt.parentNode.insertBefore(s,l.loaderElt.nextSibling),l.loaderElt.remove())},o.send(u),console.log(u)}}})},e.mailchimpIt=a}(window),window.jQuery&&!function(e,t){"use strict";function r(e,r){t(e,r)}e.fn.tweetParser=function(e){return r(this.selector,e)}}(jQuery,mailchimpIt);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haWxjaGltcC1pdC5qcyJdLCJuYW1lcyI6WyJleHBvcnRzIiwiZXh0ZW5kIiwibWFpbGNoaW1wSXRMb2FkZXIiLCJtYWtlQm94IiwibWFpbGNoaW1wSXQiLCJvdXQiLCJpIiwia2V5IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiaGFzT3duUHJvcGVydHkiLCJtZXNzYWdlIiwiY2xhc3NOYW1lIiwiZGl2IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJlbCIsImVsZW1lbnQiLCJhcmdzIiwiZXJyb3JCb3giLCJlbHQiLCJxdWVyeVNlbGVjdG9yQWxsIiwicGFyYW1ldGVycyIsInN1Y2Nlc3NNZXNzYWdlIiwic3VjY2Vzc01lc3NhZ2VDbGFzc05hbWUiLCJlcnJvck1lc3NhZ2VDbGFzc05hbWUiLCJtYWlsSW5wdXROYW1lIiwiZmlyc3ROYW1lSW5wdXROYW1lIiwibGFzdE5hbWVJbnB1dE5hbWUiLCJsb2FkZXJFbHQiLCJzdWNjZXNzQm94IiwiQXJyYXkiLCJwcm90b3R5cGUiLCJmb3JFYWNoIiwiY2FsbCIsIm5vZGVOYW1lIiwiY29uc29sZSIsImVycm9yIiwiYWN0aW9uIiwiZ2V0QXR0cmlidXRlIiwib25zdWJtaXQiLCJlIiwicHJldmVudERlZmF1bHQiLCJuYW1lIiwicmVxdWVzdCIsIlhNTEh0dHBSZXF1ZXN0IiwidXJsRW5jb2RlZERhdGEiLCJ1cmxFbmNvZGVkRGF0YVBhaXJzIiwibWFpbElucHV0IiwicXVlcnlTZWxlY3RvciIsImZpcnN0TmFtZUlucHV0IiwibGFzdE5hbWVJbnB1dCIsImRhdGEiLCJ2YWx1ZSIsInB1c2giLCJlbmNvZGVVUklDb21wb25lbnQiLCJqb2luIiwicmVwbGFjZSIsIm9wZW4iLCJzZXRSZXF1ZXN0SGVhZGVyIiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSIsIm5leHRTaWJsaW5nIiwicmVtb3ZlIiwib25sb2FkIiwiZCIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsInN0YXR1cyIsImxvZyIsInNlbmQiLCJ3aW5kb3ciLCJqUXVlcnkiLCIkIiwibWFpbGNoaW1wSXRpZnkiLCJvcHRpb25zIiwiZm4iLCJ0d2VldFBhcnNlciIsInRoaXMiLCJzZWxlY3RvciJdLCJtYXBwaW5ncyI6IkNBUUMsU0FBVUEsR0FDUCxZQUVBLElBQ0lDLEdBQ0FDLEVBQ0FDLEVBQ0FDLENBRUpILEdBQVMsU0FBVUksR0FDZixHQUFJQyxHQUNBQyxDQUlKLEtBRkFGLEVBQU1BLE1BRURDLEVBQUksRUFBR0EsRUFBSUUsVUFBVUMsT0FBUUgsR0FBSyxFQUNuQyxHQUFJRSxVQUFVRixHQUNWLElBQUtDLElBQU9DLFdBQVVGLEdBQ2RFLFVBQVVGLEdBQUdJLGVBQWVILEtBQzVCRixFQUFJRSxHQUFPQyxVQUFVRixHQUFHQyxHQUt4QyxPQUFPRixJQUdYRixFQUFVLFNBQVVRLEVBQVNDLEdBQ3pCLEdBQUlDLEdBQU1DLFNBQVNDLGNBQWMsTUFNakMsT0FKQUYsR0FBSUcsVUFBVUMsSUFBSSw2QkFDbEJKLEVBQUlHLFVBQVVDLElBQUlMLEdBQ2xCQyxFQUFJSyxZQUFjUCxFQUVYRSxHQUdYWCxFQUFvQixXQUNoQixHQUFJaUIsR0FBS0wsU0FBU0MsY0FBYyxNQUloQyxPQUhBSSxHQUFHSCxVQUFVQyxJQUFJLHNCQUNqQkUsRUFBR0QsWUFBYyxpQkFFVkMsR0FHWGYsRUFBYyxTQUFVZ0IsRUFBU0MsR0FFN0IsR0FXSUMsR0FYQUMsRUFBTVQsU0FBU1UsaUJBQWlCSixHQUNoQ0ssRUFBYXhCLEdBQ1R5QixlQUFnQiwyQkFDaEJDLHdCQUF5Qix1QkFDekJDLHNCQUF1QixxQkFDdkJDLGNBQWUsa0JBQ2ZDLG1CQUFvQix3QkFDcEJDLGtCQUFtQix1QkFDbkJDLFVBQVc5QixLQUNabUIsR0FDSFksRUFBYTlCLEVBQVFzQixFQUFXQyxlQUFnQkQsRUFBV0Usd0JBRy9ETyxPQUFNQyxVQUFVQyxRQUFRQyxLQUFLZCxFQUFLLFNBQVVKLEdBQ3hDLEdBQW9CLFNBQWhCQSxFQUFHbUIsU0FDSEMsUUFBUUMsTUFBTSx3REFBMERyQixFQUFHbUIsU0FBVW5CLE9BQ2xGLENBRUgsR0FBSXNCLEdBQVN0QixFQUFHdUIsYUFBYSxTQUU3QnZCLEdBQUd3QixTQUFXLFNBQVVDLEdBQ3BCQSxFQUFFQyxnQkFDRixJQUdJQyxHQUhBQyxFQUFVLEdBQUlDLGdCQUNkQyxFQUFpQixHQUNqQkMsS0FFQUMsRUFBWWhDLEVBQUdpQyxjQUFjLGNBQWdCM0IsRUFBV0ksY0FBZ0IsS0FDeEV3QixFQUFpQmxDLEVBQUdpQyxjQUFjLGNBQWdCM0IsRUFBV0ssbUJBQXFCLEtBQ2xGd0IsRUFBZ0JuQyxFQUFHaUMsY0FBYyxjQUFnQjNCLEVBQVdNLGtCQUFvQixLQUNoRndCLElBRUFKLEtBQ0FJLEVBQUs5QixFQUFXSSxlQUFpQnNCLEVBQVVLLE9BRzNDSCxJQUNBRSxFQUFLOUIsRUFBV0ssb0JBQXNCdUIsRUFBZUcsT0FHckRGLElBQ0FDLEVBQUs5QixFQUFXTSxtQkFBcUJ1QixFQUFjRSxNQUd2RCxLQUFLVixJQUFRUyxHQUNUTCxFQUFvQk8sS0FBS0MsbUJBQW1CWixHQUFRLElBQU1ZLG1CQUFtQkgsRUFBS1QsSUFHdEZHLEdBQWlCQyxFQUFvQlMsS0FBSyxLQUFLQyxRQUFRLE9BQVEsS0FFL0RiLEVBQVFjLEtBQUssT0FBUXBCLEdBQVEsR0FDN0JNLEVBQVFlLGlCQUFpQixlQUFnQixxQ0FFekMzQyxFQUFHNEMsV0FBV0MsYUFBYXZDLEVBQVdPLFVBQVdiLEVBQUc4QyxhQUNwRDlDLEVBQUcrQyxTQUVIbkIsRUFBUW9CLE9BQVMsV0FDYixHQUFJQyxHQUFJQyxLQUFLQyxNQUFNdkIsRUFBUXdCLGFBRXZCeEIsR0FBUXlCLFFBQVUsS0FBT3pCLEVBQVF5QixPQUFTLE1BQVFKLEVBQUU1QixPQUNwREQsUUFBUWtDLElBQUksYUFDWmxDLFFBQVFrQyxJQUFJMUIsRUFBUXlCLFFBQ3BCakMsUUFBUWtDLElBQUlMLEdBRVozQyxFQUFXTyxVQUFVK0IsV0FBV0MsYUFBYS9CLEVBQVlSLEVBQVdPLFVBQVVpQyxhQUM5RXhDLEVBQVdPLFVBQVVrQyxXQUlyQjVDLEVBQVduQixFQUFRaUUsRUFBRTVCLE1BQU9mLEVBQVdHLHVCQUN2Q1csUUFBUUMsTUFBTTRCLEdBQ2Q3QixRQUFRQyxNQUFNNEIsRUFBRTVCLE9BRWhCZixFQUFXTyxVQUFVK0IsV0FBV0MsYUFBYTFDLEVBQVVHLEVBQVdPLFVBQVVpQyxhQUM1RXhDLEVBQVdPLFVBQVVrQyxXQUc3Qm5CLEVBQVEyQixLQUFLekIsR0FDYlYsUUFBUWtDLElBQUl4QixRQU01QmpELEVBQVFJLFlBQWNBLEdBQ3hCdUUsUUFHRUEsT0FBT0MsU0FDTixTQUFVQyxFQUFHekUsR0FDVixZQUVBLFNBQVMwRSxHQUFlM0QsRUFBSTRELEdBQ3hCM0UsRUFBWWUsRUFBSTRELEdBR3BCRixFQUFFRyxHQUFHQyxZQUFjLFNBQVVGLEdBQ3pCLE1BQU9ELEdBQWVJLEtBQUtDLFNBQVVKLEtBRTNDSCxPQUFReEUiLCJmaWxlIjoibWFpbGNoaW1wLWl0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUHJvamVjdCA6IG1haWxjaGltcC1pdFxuICogZGVzY3JpcHRpb24gOiBTbWFsbCBBSkFYIE1haWxjaGltcCBXcmFwcGVyIC0gVHVybiBhIHNpbXBsZSBmb3JtIGludG8gYSBNYWlsY2hpbXAgcmVhZHkgZm9ybVxuICogQXV0aG9yIDogVmluY2VudCBMb3kgPHZpbmNlbnQubG95MUBnbWFpbC5jb20+XG4gKi9cblxuLypnbG9iYWwgd2luZG93LCBkb2N1bWVudCwgWE1MSHR0cFJlcXVlc3QsIGNvbnNvbGUqL1xuXG4oZnVuY3Rpb24gKGV4cG9ydHMpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgLy8gZnVuY3Rpb25zXG4gICAgICAgIGV4dGVuZCxcbiAgICAgICAgbWFpbGNoaW1wSXRMb2FkZXIsXG4gICAgICAgIG1ha2VCb3gsXG4gICAgICAgIG1haWxjaGltcEl0O1xuXG4gICAgZXh0ZW5kID0gZnVuY3Rpb24gKG91dCkge1xuICAgICAgICB2YXIgaSxcbiAgICAgICAgICAgIGtleTtcblxuICAgICAgICBvdXQgPSBvdXQgfHwge307XG5cbiAgICAgICAgZm9yIChpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgaWYgKGFyZ3VtZW50c1tpXSkge1xuICAgICAgICAgICAgICAgIGZvciAoa2V5IGluIGFyZ3VtZW50c1tpXSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXJndW1lbnRzW2ldLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dFtrZXldID0gYXJndW1lbnRzW2ldW2tleV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xuXG4gICAgbWFrZUJveCA9IGZ1bmN0aW9uIChtZXNzYWdlLCBjbGFzc05hbWUpIHtcbiAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKCdtYWlsY2hpbXAtaXQtcmVzcG9uc2UtYm94Jyk7XG4gICAgICAgIGRpdi5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSk7XG4gICAgICAgIGRpdi50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG5cbiAgICAgICAgcmV0dXJuIGRpdjtcbiAgICB9O1xuXG4gICAgbWFpbGNoaW1wSXRMb2FkZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdtYWlsY2hpbXBpdC1sb2FkZXInKTtcbiAgICAgICAgZWwudGV4dENvbnRlbnQgPSAnUGxlYXNlIHdhaXQuLi4nO1xuXG4gICAgICAgIHJldHVybiBlbDtcbiAgICB9O1xuXG4gICAgbWFpbGNoaW1wSXQgPSBmdW5jdGlvbiAoZWxlbWVudCwgYXJncykge1xuXG4gICAgICAgIHZhciBlbHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGVsZW1lbnQpLFxuICAgICAgICAgICAgcGFyYW1ldGVycyA9IGV4dGVuZCh7XG4gICAgICAgICAgICAgICAgc3VjY2Vzc01lc3NhZ2U6ICdUaGFua3MgZm9yIHN1YnNjcmliaW5nICEnLFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3NNZXNzYWdlQ2xhc3NOYW1lOiAnbWFpbGNoaW1wLWl0LXN1Y2Nlc3MnLFxuICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZUNsYXNzTmFtZTogJ21haWxjaGltcC1pdC1lcnJvcicsXG4gICAgICAgICAgICAgICAgbWFpbElucHV0TmFtZTogJ25ld3NsZXR0ZXJfbWFpbCcsXG4gICAgICAgICAgICAgICAgZmlyc3ROYW1lSW5wdXROYW1lOiAnbmV3c2xldHRlcl9maXJzdF9uYW1lJyxcbiAgICAgICAgICAgICAgICBsYXN0TmFtZUlucHV0TmFtZTogJ25ld3NsZXR0ZXJfbGFzdF9uYW1lJyxcbiAgICAgICAgICAgICAgICBsb2FkZXJFbHQ6IG1haWxjaGltcEl0TG9hZGVyKClcbiAgICAgICAgICAgIH0sIGFyZ3MpLFxuICAgICAgICAgICAgc3VjY2Vzc0JveCA9IG1ha2VCb3gocGFyYW1ldGVycy5zdWNjZXNzTWVzc2FnZSwgcGFyYW1ldGVycy5zdWNjZXNzTWVzc2FnZUNsYXNzTmFtZSksXG4gICAgICAgICAgICBlcnJvckJveDtcblxuICAgICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGVsdCwgZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICBpZiAoZWwubm9kZU5hbWUgIT09IFwiRk9STVwiKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignbWFpbGNoaW1wLWl0IG9ubHkgd29ya3Mgd2l0aCBmb3JtcyB0YWdzLCB5b3UgcHJvdmlkZSAnICsgZWwubm9kZU5hbWUsIGVsKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gb2tcbiAgICAgICAgICAgICAgICB2YXIgYWN0aW9uID0gZWwuZ2V0QXR0cmlidXRlKCdhY3Rpb24nKTtcblxuICAgICAgICAgICAgICAgIGVsLm9uc3VibWl0ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsRW5jb2RlZERhdGEgPSAnJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybEVuY29kZWREYXRhUGFpcnMgPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBtYWlsSW5wdXQgPSBlbC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPScgKyBwYXJhbWV0ZXJzLm1haWxJbnB1dE5hbWUgKyAnXScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3ROYW1lSW5wdXQgPSBlbC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPScgKyBwYXJhbWV0ZXJzLmZpcnN0TmFtZUlucHV0TmFtZSArICddJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0TmFtZUlucHV0ID0gZWwucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT0nICsgcGFyYW1ldGVycy5sYXN0TmFtZUlucHV0TmFtZSArICddJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0ge307XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG1haWxJbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVtwYXJhbWV0ZXJzLm1haWxJbnB1dE5hbWVdID0gbWFpbElucHV0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpcnN0TmFtZUlucHV0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhW3BhcmFtZXRlcnMuZmlyc3ROYW1lSW5wdXROYW1lXSA9IGZpcnN0TmFtZUlucHV0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGxhc3ROYW1lSW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFbcGFyYW1ldGVycy5sYXN0TmFtZUlucHV0TmFtZV0gPSBsYXN0TmFtZUlucHV0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yIChuYW1lIGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybEVuY29kZWREYXRhUGFpcnMucHVzaChlbmNvZGVVUklDb21wb25lbnQobmFtZSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQoZGF0YVtuYW1lXSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdXJsRW5jb2RlZERhdGEgPSB1cmxFbmNvZGVkRGF0YVBhaXJzLmpvaW4oJyYnKS5yZXBsYWNlKC8lMjAvZywgJysnKTtcblxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0Lm9wZW4oJ1BPU1QnLCBhY3Rpb24sIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgLy9yZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtTGVuZ3RoJywgdXJsRW5jb2RlZERhdGEubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgZWwucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUocGFyYW1ldGVycy5sb2FkZXJFbHQsIGVsLm5leHRTaWJsaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgZWwucmVtb3ZlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdC5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IEpTT04ucGFyc2UocmVxdWVzdC5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3VjY2VzcyFcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXF1ZXN0LnN0YXR1cyA+PSAyMDAgJiYgcmVxdWVzdC5zdGF0dXMgPCA0MDAgJiYgIWQuZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc3VjY2VzcyAhJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVxdWVzdC5zdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycy5sb2FkZXJFbHQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoc3VjY2Vzc0JveCwgcGFyYW1ldGVycy5sb2FkZXJFbHQubmV4dFNpYmxpbmcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMubG9hZGVyRWx0LnJlbW92ZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlIHJlYWNoZWQgb3VyIHRhcmdldCBzZXJ2ZXIsIGJ1dCBpdCByZXR1cm5lZCBhbiBlcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yQm94ID0gbWFrZUJveChkLmVycm9yLCBwYXJhbWV0ZXJzLmVycm9yTWVzc2FnZUNsYXNzTmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZC5lcnJvcik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzLmxvYWRlckVsdC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlcnJvckJveCwgcGFyYW1ldGVycy5sb2FkZXJFbHQubmV4dFNpYmxpbmcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMubG9hZGVyRWx0LnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0LnNlbmQodXJsRW5jb2RlZERhdGEpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh1cmxFbmNvZGVkRGF0YSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGV4cG9ydHMubWFpbGNoaW1wSXQgPSBtYWlsY2hpbXBJdDtcbn0od2luZG93KSk7XG5cbi8qZ2xvYmFsICQsIGpRdWVyeSwgbWFpbGNoaW1wSXQqL1xuaWYgKHdpbmRvdy5qUXVlcnkpIHtcbiAgICAoZnVuY3Rpb24gKCQsIG1haWxjaGltcEl0KSB7XG4gICAgICAgICd1c2Ugc3RyaWN0JztcblxuICAgICAgICBmdW5jdGlvbiBtYWlsY2hpbXBJdGlmeShlbCwgb3B0aW9ucykge1xuICAgICAgICAgICAgbWFpbGNoaW1wSXQoZWwsIG9wdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgJC5mbi50d2VldFBhcnNlciA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICByZXR1cm4gbWFpbGNoaW1wSXRpZnkodGhpcy5zZWxlY3Rvciwgb3B0aW9ucyk7XG4gICAgICAgIH07XG4gICAgfShqUXVlcnksIG1haWxjaGltcEl0KSk7XG59Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
